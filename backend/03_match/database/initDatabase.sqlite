CREATE TABLE IF NOT EXISTS matches (
	id INTEGER PRIMARY KEY AUTOINCREMENT,

	p1_id INTEGER NOT NULL,
	p1_type TEXT NOT NULL,

	p2_id INTEGER,
	p2_type TEXT NOT NULL,

	tournament_id INTEGER NOT NULL DEFAULT 0,

	created_at TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS history (
	id INTEGER,

	p1_id INTEGER NOT NULL,
	p1_type TEXT NOT NULL,
	scoreP1 INTEGER DEFAULT 0,

	p2_id INTEGER,
	p2_type TEXT NOT NULL,
	scoreP2 INTEGER DEFAULT 0,

	tournament_id INTEGER NOT NULL DEFAULT 0,

	winner_id INTEGER NOT NULL,
	loser_id INTEGER NOT NULL,

	created_at TEXT NOT NULL,
	ended_at TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS local (
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	player1 TEXT DEFAULT 'P1',
	player2 TEXT DEFAULT 'P2',
	scoreP1 INTEGER DEFAULT 0,
	scoreP2 INTEGER DEFAULT 0,
	winner_id TEXT,
	created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
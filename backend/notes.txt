Tournoi>
	entrer le nom du Tournoi
	> le tournoi existe > rejoindre
	> il n'existe pas > le cree

Tokens JWT >
	login >
	> creation de deux tokens: un "cle privee" stocke dans la BD user,
		un token "cle publique" qui est donne au client
	> verification du JWT : on verifie que le token du client
		correspond au token stocke
	> duree d'expiration pour le token client ?
		refresh quand on arrive a la moitie par exemple ?

	logout >
	> suppression de la cle stockee
	( pas besoin de revoquer les tokens )

	expiration des tokens 1h / 1d par exemple
	> si revoques, on verifie dans la BD si la date d'expiration
		est atteinte
	> si oui, on supprime le token

	stocker l'iat du token dans les infos du user, comparer les
	deux pour l'authentification

---------------------------------------------------

data persistante :

{
    "user": {
        "id": 1,
        "name": "Nathan",
        "type": "registered",
        "status": "pending",
        "wins": 0,
        "losses": 0,
        "friend_ship": null,
        "picture": "./pictures/BG.webp"
    },
    "message": "User created"
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoicmVnaXN0ZXJlZCIsImlkIjoxLCJpYXQiOjE3NTgxMTk2NTYsImV4cCI6MTc1ODEyNjg1Nn0.1C-41FKBuG1WJ6kaPiyq1c5U9cA36zEhC2WYwNtOs0I",
}

--------------------------------------------------------------------
17/09/2025

Todo : 

-Impossibilite de PUT name ( function : updateInfo)

-Replace getName -> getId (A voir avec Louis)
	protege et certifit lidentite de luser (name peux changer)
		A tester pour update et del par exemple , ou updateName et logout, token invalid etc....

-Attaque XSS : 

	PROTECTION AJV (Another JSON Validator)

	1. Ajout des patern dans les schema : 
		exple : pattern: "^[^<>{}\"'`]*$"
	2. Max lenght va limiter les risques
		exple : maxLength: 254

	PROTECTION Sanitization backend facultatif mais utile en plus d’AJV
		Permet de nettoyer les strings dans le body
	3 - npm install sanitize-html et import sanitizeHtml from 'sanitize-html';
		exple : 
				function sanitizeObject(obj) {
				for (const key in obj) {
					if (typeof obj[key] === 'string') {
					obj[key] = sanitizeHtml(obj[key], {
						allowedTags: [],
						allowedAttributes: {}
					});
					} else if (typeof obj[key] === 'object') {
					sanitizeObject(obj[key]);
					}
				}
				}

				et 

				fastify.addHook('preValidation', async (request, reply) => {
					if (request.body)
						sanitizeObject(request.body);
				});


	3 - headers de sécurité HTTP ----> ajoute X-Content-Type-Options, X-XSS-Protection
		npm install @fastify/helmet
		import helmet from '@fastify/helmet';
		await fastify.register(helmet, {
			global: true
		});

-----------
